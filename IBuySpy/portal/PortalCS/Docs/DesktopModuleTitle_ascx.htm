<html><head><link rel=stylesheet href=style.css></head><body><div class=SourcePanel style='font-size:12'><pre style='background-color:white'>
&lt%@ Import Namespace="ASPNetPortal" %<font color= "blue">&gt</font>

<font color= "green">&lt%--

   The PortalModuleTitle User Control is responsible for displaying the title of each
   portal module within the portal -- as well as optionally the module's "Edit Page"
   (if such a page has been configured).

--%<font color= "blue">&gt</font></font>

<font color= "blue">&lt</font><font color="maroon">script</font> language="C#" runat="server"<font color= "blue">&gt</font>
<font color= "blue"></font>
<font color= "blue">    public </font>String EditText = null;
<font color= "blue">    public </font>String EditUrl  = null;
<font color= "blue">    public </font>String EditTarget = null;
<font color= "blue"></font>
<font color= "blue">    void</font> Page_Load(Object sender, EventArgs e) {
<font color= "blue"></font>
<font color= "green">        // Obtain PortalSettings from Current Context</font>
<font color= "blue">        </font>PortalSettings portalSettings = (PortalSettings) HttpContext.Current.Items["PortalSettings"];
<font color= "blue"></font>
<font color= "green">        // Obtain reference to parent portal module</font>
<font color= "blue">        </font>PortalModuleControl portalModule = (PortalModuleControl) this.Parent;
<font color= "blue"></font>
<font color= "green">        // Display Modular Title Text and Edit Buttons</font>
<font color= "blue">        </font>ModuleTitle.Text = portalModule.ModuleConfiguration.ModuleTitle;
<font color= "blue"></font>
<font color= "green">        // Display the Edit button if the parent portalmodule has configured the PortalModuleTitle User Control</font>
<font color= "green">        // to display it -- and the current client has edit access permissions</font>
<font color= "blue"></font><font color= "blue">        if </font>((portalSettings.AlwaysShowEditButton == true) || (PortalSecurity.IsInRoles(portalModule.ModuleConfiguration.AuthorizedEditRoles)) && (EditText != null)) {<font color= "blue"></font>
<font color= "blue"></font>
<font color= "blue">            </font>EditButton.Text = EditText;
<font color= "blue">            </font>EditButton.NavigateUrl = EditUrl + "?mid=" + portalModule.ModuleId.ToString();
<font color= "blue">            </font>EditButton.Target = EditTarget;
<font color= "blue">        </font>}
<font color= "blue">    </font>}
<font color= "blue"></font>
<font color= "blue">&lt/</font><font color="maroon">script</font><font color= "blue">&gt</font>

<font color= "blue">&lt</font><font color="maroon">table</font> width="98%" cellspacing="0" cellpadding="0"<font color= "blue">&gt</font>
    <font color= "blue">&lt</font><font color="maroon">tr</font><font color= "blue">&gt</font>
        <font color= "blue">&lt</font><font color="maroon">td</font> align="left"<font color= "blue">&gt</font>
            <font color= "blue">&lt</font><font color=blue>asp:label id="ModuleTitle" cssclass="Head" EnableViewState="false" runat="server" /</font><font color= "blue">&gt</font>
        <font color= "blue">&lt/</font><font color="maroon">td</font><font color= "blue">&gt</font>
        <font color= "blue">&lt</font><font color="maroon">td</font> align="right"<font color= "blue">&gt</font>
            <font color= "blue">&lt</font><font color=blue>asp:hyperlink id="EditButton" cssclass="CommandButton" EnableViewState="false" runat="server" /</font><font color= "blue">&gt</font>
        <font color= "blue">&lt/</font><font color="maroon">td</font><font color= "blue">&gt</font>
    <font color= "blue">&lt/</font><font color="maroon">tr</font><font color= "blue">&gt</font>
    <font color= "blue">&lt</font><font color="maroon">tr</font><font color= "blue">&gt</font>
        <font color= "blue">&lt</font><font color="maroon">td</font> colspan="2"<font color= "blue">&gt</font>
            <font color= "blue">&lt</font><font color="maroon">hr</font> noshade size="1pt"<font color= "blue">&gt</font>
        <font color= "blue">&lt/</font><font color="maroon">td</font><font color= "blue">&gt</font>
    <font color= "blue">&lt/</font><font color="maroon">tr</font><font color= "blue">&gt</font>
<font color= "blue">&lt/</font><font color="maroon">table</font><font color= "blue">&gt</font>
</pre>